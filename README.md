# gta5-helper-server

## Для запуска

Сначала ставим docker hub, регистрируемся и т.д. Ждем пока запустится Docker Engine. После установки Docker Hub требуется перезагрузка

После в корне проекта запускаем команду docker-compose -f docker-compose.yaml build - она сделает docker image из Dockerfile, который находистя в корневой папке. Сбилдить нужн будет всего один раз
После того как image сбилдится нужно его включить - это делается командой docker-compose -f docker-compose.yaml build

Зачем здесь Docker - для того, чтобы расположить клиент и сервер под одним ip. После запуска докера проект будет располагаться на 127.0.0.1

React приложение билдится в папку public. Чтобы запустить билд нужно выполнить команду build:client. Билд поддерживает hot-reload
Бэкенд приложение запускается с помощью команды start:dev. Тоже поддерживает hot-reload

Таким образом, для запуска всего проекта нужно ввести три команды:
docker-compose -f docker-compose.yaml build
build:client
start:dev

Чтобы отобразился html, который сбилдится из React нужно перейти на 127.0.0.1/index.html
Чтобы использовать сервер нужно перейти на 127.0.0.1/api/\*\*

## CI/CD
Для того, чтобы запустить дейплой нужно просто закомитить в master
Существует два docker-compose конфига: для дева и для прода
Чтобы запустить прод нужно выполнить docker-compose.production.yaml. Для разработки - docker-compose.yaml

В проде нужны другие nginx конфиги, другая конфигурация базы в т.д.
Так же, в проде нужно nest-приложение запускать в контейнере и линкать его для nginx, чтобы бэк не торчал портами в интренет

# SSL
SSL сертификат получен с помощью certbot
